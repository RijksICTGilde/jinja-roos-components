{% import 'components/_event_mixin.j2' as events %}
{% import 'components/_attribute_mixin.j2' as attributes %}
{% set actions = _component_context.actions | default([]) %}
{% set alignment = _component_context.alignment | default('start') %}
{% set gap = _component_context.gap | default('md') %}
{% set direction = _component_context.direction | default('horizontal') %}
{% set additional_class = _component_context.class | default('') %}
{% set content = _component_context.content | default('') %}

{# Build CSS classes #}
{% set action_group_classes = ['rvo-action-group', 'utrecht-button-group', 'utrecht-button-group--row'] %}

{% if direction == 'vertical' %}
    {% set action_group_classes = action_group_classes + ['rvo-action-group--vertical'] %}
{% endif %}

{% if alignment == 'end' %}
    {% set action_group_classes = action_group_classes + ['rvo-action-group--align-end'] %}
{% elif alignment == 'center' %}
    {% set action_group_classes = action_group_classes + ['rvo-action-group--align-center'] %}
{% elif alignment == 'space-between' %}
    {% set action_group_classes = action_group_classes + ['rvo-action-group--space-between'] %}
{% endif %}

{% if gap %}
    {% set action_group_classes = action_group_classes + ['rvo-action-group--gap-' + gap] %}
{% endif %}

{% if additional_class %}
    {% set action_group_classes = action_group_classes + [additional_class] %}
{% endif %}

{# Add utility classes from text-style, margin, padding attributes #}
{% set utility_classes = attributes.render_utility_classes(_component_context) %}
{% if utility_classes %}
    {% set action_group_classes = action_group_classes + utility_classes.split() %}
{% endif %}

<div
    class="{{ action_group_classes | join(' ') }}"
    data-roos-component="action-group"
    data-roos-alignment="{{ alignment }}"
    data-roos-direction="{{ direction }}"
    data-roos-gap="{{ gap }}"
    {{ events.render_extra_attributes(_component_context) }}>
    {% if content %}
        {{ content | safe }}
    {% elif actions %}
        {% for action in actions %}
            {% set _component_context = action %}
            {% include 'components/button.html.j2' %}
        {% endfor %}
    {% endif %}
</div>